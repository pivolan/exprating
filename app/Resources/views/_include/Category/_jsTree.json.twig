{% set current_category = category %}
{% for category in categories %}
{
    id: '{{ category.id }}',
    {% if categories[category.parent_id] is defined %}
    parent: '{{ category.parent_id|default('#') }}',
    {% else %}
    parent: '#',
    {% endif %}
    text: '{{ category.name|raw }}',
    a_attr: {
        href: '{{ path(app.request.get('_route'), {'slug': category.id}) }}',
        data_slug: '{{ category.id }}',
    },
    state: {
        selected: {{ category.id == current_category?'true':'false' }}
    }
},
{% endfor %}